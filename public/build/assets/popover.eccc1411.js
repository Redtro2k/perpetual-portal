import{o as ne,c as ae,b as re,M as G,d as E,j as w,O as Q,P as z,N as j,F as U,Q as J}from"./app.51a1d7d7.js";import{t as M,m as A,o as l,E as X,c as ue,u as L,l as H,y as se,h as ie,F as pe,P as N,p as Y,R as K,b as B,M as C,w as ve,a as F}from"./use-outside-click.9057de84.js";import{b as ce}from"./use-resolve-button-type.d600a939.js";import{E as de,n as Z,f as _,a as q,d as D}from"./use-event-listener.7061ebbd.js";function ge(i,b){return ne(),ae("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[re("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 6h16M4 12h16M4 18h16"})])}var fe=(i=>(i[i.Open=0]="Open",i[i.Closed=1]="Closed",i))(fe||{});let ee=Symbol("PopoverContext");function V(i){let b=J(ee,null);if(b===null){let h=new Error(`<${i} /> is missing a parent <${be.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(h,V),h}return b}let te=Symbol("PopoverGroupContext");function oe(){return J(te,null)}let le=Symbol("PopoverPanelContext");function Pe(){return J(le,null)}let be=G({name:"Popover",props:{as:{type:[Object,String],default:"div"}},setup(i,{slots:b,attrs:h,expose:$}){var t;let e=`headlessui-popover-button-${M()}`,S=`headlessui-popover-panel-${M()}`,c=E(null);$({el:c,$el:c});let d=E(1),v=E(null),g=E(null),y=E(null),u=E(null),m=w(()=>A(c)),I=w(()=>{var a,s;if(!l(v)||!l(u))return!1;for(let T of document.querySelectorAll("body > *"))if(Number(T==null?void 0:T.contains(l(v)))^Number(T==null?void 0:T.contains(l(u))))return!0;let n=X(),k=n.indexOf(l(v)),W=(k+n.length-1)%n.length,x=(k+1)%n.length,O=n[W],R=n[x];return!((a=l(u))!=null&&a.contains(O))&&!((s=l(u))!=null&&s.contains(R))}),f={popoverState:d,buttonId:e,panelId:S,panel:u,button:v,isPortalled:I,beforePanelSentinel:g,afterPanelSentinel:y,togglePopover(){d.value=L(d.value,{[0]:1,[1]:0})},closePopover(){d.value!==1&&(d.value=1)},close(a){f.closePopover();let s=(()=>a?a instanceof HTMLElement?a:a.value instanceof HTMLElement?l(a):l(f.button):l(f.button))();s==null||s.focus()}};Q(ee,f),ue(w(()=>L(d.value,{[0]:H.Open,[1]:H.Closed})));let p={buttonId:e,panelId:S,close(){f.closePopover()}},o=oe(),r=o==null?void 0:o.registerPopover;function P(){var a,s,n,k;return(k=o==null?void 0:o.isFocusWithinPopoverGroup())!=null?k:((a=m.value)==null?void 0:a.activeElement)&&(((s=l(v))==null?void 0:s.contains(m.value.activeElement))||((n=l(u))==null?void 0:n.contains(m.value.activeElement)))}return z(()=>r==null?void 0:r(p)),de((t=m.value)==null?void 0:t.defaultView,"focus",a=>{var s,n;d.value===0&&(P()||!v||!u||(s=l(f.beforePanelSentinel))!=null&&s.contains(a.target)||(n=l(f.afterPanelSentinel))!=null&&n.contains(a.target)||f.closePopover())},!0),se([v,u],(a,s)=>{var n;f.closePopover(),ie(s,pe.Loose)||(a.preventDefault(),(n=l(v))==null||n.focus())},w(()=>d.value===0)),()=>{let a={open:d.value===0,close:f.close};return N({theirProps:i,ourProps:{ref:c},slot:a,slots:b,attrs:h,name:"Popover"})}}}),$e=G({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(i,{attrs:b,slots:h,expose:$}){let t=V("PopoverButton"),e=w(()=>A(t.button));$({el:t.button,$el:t.button});let S=oe(),c=S==null?void 0:S.closeOthers,d=Pe(),v=d===null?!1:d===t.panelId,g=E(null),y=`headlessui-focus-sentinel-${M()}`;v||z(()=>{t.button.value=g.value});let u=ce(w(()=>({as:i.as,type:b.type})),g);function m(o){var r,P,a,s,n;if(v){if(t.popoverState.value===1)return;switch(o.key){case F.Space:case F.Enter:o.preventDefault(),(P=(r=o.target).click)==null||P.call(r),t.closePopover(),(a=l(t.button))==null||a.focus();break}}else switch(o.key){case F.Space:case F.Enter:o.preventDefault(),o.stopPropagation(),t.popoverState.value===1&&(c==null||c(t.buttonId)),t.togglePopover();break;case F.Escape:if(t.popoverState.value!==0)return c==null?void 0:c(t.buttonId);if(!l(t.button)||((s=e.value)==null?void 0:s.activeElement)&&!((n=l(t.button))!=null&&n.contains(e.value.activeElement)))return;o.preventDefault(),o.stopPropagation(),t.closePopover();break}}function I(o){v||o.key===F.Space&&o.preventDefault()}function f(o){var r,P;i.disabled||(v?(t.closePopover(),(r=l(t.button))==null||r.focus()):(o.preventDefault(),o.stopPropagation(),t.popoverState.value===1&&(c==null||c(t.buttonId)),t.togglePopover(),(P=l(t.button))==null||P.focus()))}function p(o){o.preventDefault(),o.stopPropagation()}return()=>{let o=t.popoverState.value===0,r={open:o},P=v?{ref:g,type:u.value,onKeydown:m,onClick:f}:{ref:g,id:t.buttonId,type:u.value,"aria-expanded":i.disabled?void 0:t.popoverState.value===0,"aria-controls":l(t.panel)?t.panelId:void 0,disabled:i.disabled?!0:void 0,onKeydown:m,onKeyup:I,onClick:f,onMousedown:p},a=Z();function s(){let n=l(t.panel);if(!n)return;function k(){L(a.value,{[D.Forwards]:()=>B(n,C.First),[D.Backwards]:()=>B(n,C.Last)})}k()}return j(U,[N({ourProps:P,theirProps:{...b,...i},slot:r,attrs:b,slots:h,name:"PopoverButton"}),o&&!v&&t.isPortalled.value&&j(_,{id:y,features:q.Focusable,as:"button",type:"button",onFocus:s})])}}});G({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(i,{attrs:b,slots:h}){let $=V("PopoverOverlay"),t=`headlessui-popover-overlay-${M()}`,e=Y(),S=w(()=>e!==null?e.value===H.Open:$.popoverState.value===0);function c(){$.closePopover()}return()=>{let d={open:$.popoverState.value===0};return N({ourProps:{id:t,"aria-hidden":!0,onClick:c},theirProps:i,slot:d,attrs:b,slots:h,features:K.RenderStrategy|K.Static,visible:S.value,name:"PopoverOverlay"})}}});let ke=G({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1}},inheritAttrs:!1,setup(i,{attrs:b,slots:h,expose:$}){let{focus:t}=i,e=V("PopoverPanel"),S=w(()=>A(e.panel)),c=`headlessui-focus-sentinel-before-${M()}`,d=`headlessui-focus-sentinel-after-${M()}`;$({el:e.panel,$el:e.panel}),Q(le,e.panelId),z(()=>{var p,o;if(!t||e.popoverState.value!==0||!e.panel)return;let r=(p=S.value)==null?void 0:p.activeElement;(o=l(e.panel))!=null&&o.contains(r)||B(l(e.panel),C.First)});let v=Y(),g=w(()=>v!==null?v.value===H.Open:e.popoverState.value===0);function y(p){var o,r;switch(p.key){case F.Escape:if(e.popoverState.value!==0||!l(e.panel)||S.value&&!((o=l(e.panel))!=null&&o.contains(S.value.activeElement)))return;p.preventDefault(),p.stopPropagation(),e.closePopover(),(r=l(e.button))==null||r.focus();break}}function u(p){var o,r,P,a,s;let n=p.relatedTarget;!n||!l(e.panel)||(o=l(e.panel))!=null&&o.contains(n)||(e.closePopover(),(((P=(r=l(e.beforePanelSentinel))==null?void 0:r.contains)==null?void 0:P.call(r,n))||((s=(a=l(e.afterPanelSentinel))==null?void 0:a.contains)==null?void 0:s.call(a,n)))&&n.focus({preventScroll:!0}))}let m=Z();function I(){let p=l(e.panel);if(!p)return;function o(){L(m.value,{[D.Forwards]:()=>{B(p,C.Next)},[D.Backwards]:()=>{var r;(r=l(e.button))==null||r.focus({preventScroll:!0})}})}o()}function f(){let p=l(e.panel);if(!p)return;function o(){L(m.value,{[D.Forwards]:()=>{var r,P;let a=l(e.button),s=l(e.panel);if(!a)return;let n=X(),k=n.indexOf(a),W=n.slice(0,k+1),x=[...n.slice(k+1),...W];for(let O of x.slice())if(((P=(r=O==null?void 0:O.id)==null?void 0:r.startsWith)==null?void 0:P.call(r,"headlessui-focus-sentinel-"))||(s==null?void 0:s.contains(O))){let R=x.indexOf(O);R!==-1&&x.splice(R,1)}B(x,C.First,!1)},[D.Backwards]:()=>B(p,C.Previous)})}o()}return()=>{let p={open:e.popoverState.value===0,close:e.close},o={ref:e.panel,id:e.panelId,onKeydown:y,onFocusout:t&&e.popoverState.value===0?u:void 0,tabIndex:-1};return N({ourProps:o,theirProps:{...b,...ve(i,["focus"])},attrs:b,slot:p,slots:{...h,default:(...r)=>{var P;return[j(U,[g.value&&e.isPortalled.value&&j(_,{id:c,ref:e.beforePanelSentinel,features:q.Focusable,as:"button",type:"button",onFocus:I}),(P=h.default)==null?void 0:P.call(h,...r),g.value&&e.isPortalled.value&&j(_,{id:d,ref:e.afterPanelSentinel,features:q.Focusable,as:"button",type:"button",onFocus:f})])]}},features:K.RenderStrategy|K.Static,visible:g.value,name:"PopoverPanel"})}}}),we=G({name:"PopoverGroup",props:{as:{type:[Object,String],default:"div"}},setup(i,{attrs:b,slots:h,expose:$}){let t=E(null),e=E([]),S=w(()=>A(t));$({el:t,$el:t});function c(y){let u=e.value.indexOf(y);u!==-1&&e.value.splice(u,1)}function d(y){return e.value.push(y),()=>{c(y)}}function v(){var y;let u=S.value;if(!u)return!1;let m=u.activeElement;return(y=l(t))!=null&&y.contains(m)?!0:e.value.some(I=>{var f,p;return((f=u.getElementById(I.buttonId))==null?void 0:f.contains(m))||((p=u.getElementById(I.panelId))==null?void 0:p.contains(m))})}function g(y){for(let u of e.value)u.buttonId!==y&&u.close()}return Q(te,{registerPopover:d,unregisterPopover:c,isFocusWithinPopoverGroup:v,closeOthers:g}),()=>N({ourProps:{ref:t},theirProps:i,slot:{},attrs:b,slots:h,name:"PopoverGroup"})}});export{we as H,ke as L,be as c,$e as k,ge as r};
